<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>EasyPredict Â· Regtest</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,300;0,400;0,500;0,600;1,400&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EASYPREDICT â€” BLOOMBERG TERMINAL STYLE
   OP_NET Layer 1 Â· Bitcoin Regtest
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root{
  --bg0:#07080a;--bg1:#0c0e12;--bg2:#111419;--bg3:#161920;--bgh:#1a1d25;
  --bd:#20242e;--bdh:#2c3140;--bda:#3a4055;
  --t0:#dde1ec;--t1:#9099ae;--t2:#555e72;--t3:#32374a;
  --g:#00c47a;--gd:#005e3a;--gb:rgba(0,196,122,.07);
  --r:#e8364f;--rd:#7a1525;--rb:rgba(232,54,79,.07);
  --a:#f0a020;--ab:rgba(240,160,32,.07);--ad:#7a4d08;
  --bl:#3a85f0;--pu:#7040d8;
  --ff:'IBM Plex Mono',monospace;
  --fs:'IBM Plex Sans',sans-serif;
  --rr:2px;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:var(--bg0);color:var(--t0);font-family:var(--fs);font-size:13px;line-height:1.5;min-height:100vh;overflow-x:hidden}
button{cursor:pointer;font-family:inherit}
input,select{font-family:var(--ff);color:var(--t0)}
::-webkit-scrollbar{width:4px;height:4px}
::-webkit-scrollbar-track{background:var(--bg1)}
::-webkit-scrollbar-thumb{background:var(--bdh);border-radius:2px}
a{color:var(--bl);text-decoration:none}

/* â”€â”€ TICKER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#ticker{height:26px;background:var(--bg1);border-bottom:1px solid var(--bd);display:flex;align-items:center;overflow:hidden;position:sticky;top:0;z-index:200}
.tt{display:flex;white-space:nowrap;animation:tscroll 55s linear infinite}
.ti{display:flex;align-items:center;gap:7px;padding:0 22px;border-right:1px solid var(--bd);height:26px;font-family:var(--ff);font-size:10px;flex-shrink:0}
.ts{color:var(--a);font-weight:600;letter-spacing:.06em}
.tv{color:var(--t0)}
.tc{font-size:9px}.tc.u{color:var(--g)}.tc.d{color:var(--r)}
@keyframes tscroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}

/* â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#hdr{height:46px;background:var(--bg1);border-bottom:1px solid var(--bd);display:flex;align-items:center;padding:0 16px;gap:0;position:sticky;top:26px;z-index:190}
.logo{font-family:var(--ff);font-size:14px;font-weight:600;letter-spacing:.18em;color:var(--a);margin-right:20px;white-space:nowrap}
.logo b{color:var(--t2);font-weight:300}
.nav{display:flex;gap:0;flex:1;overflow-x:auto}
.nav::-webkit-scrollbar{display:none}
.nt{background:none;border:none;border-bottom:2px solid transparent;color:var(--t2);padding:0 14px;height:46px;font-size:10px;font-family:var(--ff);letter-spacing:.07em;text-transform:uppercase;cursor:pointer;transition:color .12s,border-color .12s;white-space:nowrap}
.nt:hover{color:var(--t1);background:var(--bgh)}
.nt.on{color:var(--a);border-bottom-color:var(--a)}
.w-zone{display:flex;align-items:center;gap:8px;margin-left:auto;padding-left:12px;flex-shrink:0}
.wdot{width:6px;height:6px;border-radius:50%;background:var(--t3);transition:all .3s;flex-shrink:0}
.wdot.on{background:var(--g);box-shadow:0 0 8px var(--g)}
.wdot.wait{background:var(--a);animation:pulse .9s infinite}
.wdot.err{background:var(--r)}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.25}}
.waddr{font-family:var(--ff);font-size:10px;color:var(--t1);background:var(--bg3);padding:3px 9px;border-radius:var(--rr);border:1px solid var(--bd);max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:none}
.wbal{font-family:var(--ff);font-size:11px;color:var(--g);font-weight:500;display:none}
.wnet{font-family:var(--ff);font-size:9px;color:var(--pu);background:rgba(112,64,216,.1);border:1px solid rgba(112,64,216,.25);padding:2px 7px;border-radius:var(--rr);letter-spacing:.06em;display:none}

/* â”€â”€ BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.btn{border:1px solid var(--bdh);background:var(--bg3);color:var(--t0);padding:5px 13px;font-size:10px;font-family:var(--ff);letter-spacing:.06em;text-transform:uppercase;border-radius:var(--rr);transition:all .12s;cursor:pointer;line-height:1.4}
.btn:hover{border-color:var(--a);color:var(--a)}
.btn:disabled{opacity:.35;cursor:not-allowed;pointer-events:none}
.btn-p{background:var(--a);color:var(--bg0);border-color:var(--a);font-weight:600}
.btn-p:hover{background:#d48c18;border-color:#d48c18;color:var(--bg0)}
.btn-g{background:var(--gd);border-color:var(--g);color:#e0fff4}
.btn-g:hover{background:var(--g);color:var(--bg0)}
.btn-r{background:var(--rd);border-color:var(--r);color:#ffe0e5}
.btn-r:hover{background:var(--r);color:var(--bg0)}
.btn-xl{width:100%;padding:11px;font-size:11px;text-align:center}
.btn-sm{padding:3px 9px;font-size:9px}

/* â”€â”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#app{max-width:1580px;margin:0 auto;padding:14px 16px}
.pg{display:none}.pg.on{display:block}
.row-stats{display:grid;grid-template-columns:repeat(5,1fr);gap:1px;background:var(--bd);border:1px solid var(--bd);border-radius:var(--rr);overflow:hidden;margin-bottom:14px}
.row-4{display:grid;grid-template-columns:repeat(4,1fr);gap:1px;background:var(--bd);border:1px solid var(--bd);border-radius:var(--rr);overflow:hidden;margin-bottom:14px}
.sc{background:var(--bg1);padding:10px 14px}
.sl{font-family:var(--ff);font-size:8px;color:var(--t2);text-transform:uppercase;letter-spacing:.1em;margin-bottom:3px}
.sv{font-family:var(--ff);font-size:16px;font-weight:500}
.sv.u{color:var(--g)}.sv.d{color:var(--r)}.sv.a{color:var(--a)}.sv.n{color:var(--t0)}
.ss{font-size:9px;color:var(--t2);font-family:var(--ff);margin-top:1px}
.g2{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:14px}
.g31{display:grid;grid-template-columns:2fr 1fr;gap:14px}
.shdr{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.sttl{font-family:var(--ff);font-size:9px;text-transform:uppercase;letter-spacing:.09em;color:var(--t2)}
.sep{height:1px;background:var(--bd);margin:12px 0}

/* â”€â”€ PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.panel{background:var(--bg1);border:1px solid var(--bd);border-radius:var(--rr);padding:18px}
.ptitle{font-family:var(--ff);font-size:9px;text-transform:uppercase;letter-spacing:.1em;color:var(--a);margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid var(--bd)}

/* â”€â”€ MARKET GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.mgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1px;background:var(--bd);border:1px solid var(--bd);border-radius:var(--rr);overflow:hidden}
.mc{background:var(--bg1);padding:14px 14px 14px 17px;position:relative;transition:background .1s}
.mc:hover{background:var(--bgh)}
.mc::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px}
.mc.live::before{background:var(--g)}
.mc.exp::before{background:var(--t3)}
.mc.res::before{background:var(--a)}
.mid{font-family:var(--ff);font-size:8px;color:var(--t3);margin-bottom:4px;letter-spacing:.05em}
.mq{font-size:12px;font-weight:500;color:var(--t0);line-height:1.4;margin-bottom:10px;min-height:32px}
.mbar{height:4px;background:var(--bg3);border-radius:2px;overflow:hidden;margin-bottom:4px}
.mbar-y{height:100%;background:linear-gradient(90deg,var(--gd),var(--g));border-radius:2px;transition:width .6s cubic-bezier(.4,0,.2,1)}
.mblab{display:flex;justify-content:space-between;font-family:var(--ff);font-size:10px;margin-bottom:8px}
.myl{color:var(--g);font-weight:600}.mnl{color:var(--r);font-weight:600}
.mft{display:flex;justify-content:space-between;align-items:center;padding-top:8px;border-top:1px solid var(--bd)}
.mvol{font-family:var(--ff);font-size:9px;color:var(--t2)}
.mtmr{font-family:var(--ff);font-size:9px}
.mtmr.live{color:var(--g)}.mtmr.exp{color:var(--t3)}.mtmr.res{color:var(--a)}
.macts{display:flex;gap:4px;margin-top:8px}
.macts .btn{flex:1;text-align:center}

/* â”€â”€ BADGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.bdg{display:inline-block;font-family:var(--ff);font-size:8px;padding:2px 5px;border-radius:1px;text-transform:uppercase;letter-spacing:.05em}
.bdg-live{background:rgba(0,196,122,.1);color:var(--g);border:1px solid rgba(0,196,122,.22)}
.bdg-exp{background:rgba(85,94,114,.1);color:var(--t2);border:1px solid rgba(85,94,114,.22)}
.bdg-res{background:rgba(240,160,32,.1);color:var(--a);border:1px solid rgba(240,160,32,.22)}
.bdg-yes{background:rgba(0,196,122,.15);color:var(--g)}
.bdg-no{background:rgba(232,54,79,.15);color:var(--r)}

/* â”€â”€ FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.fg{margin-bottom:13px}
.fl{display:block;font-family:var(--ff);font-size:8px;text-transform:uppercase;letter-spacing:.09em;color:var(--t2);margin-bottom:4px}
.fi{width:100%;background:var(--bg3);border:1px solid var(--bd);color:var(--t0);padding:8px 10px;font-size:12px;font-family:var(--ff);border-radius:var(--rr);outline:none;transition:border-color .13s}
.fi:focus{border-color:var(--a)}
.fi::placeholder{color:var(--t3)}

/* â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#ovl{display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:500;align-items:center;justify-content:center;padding:16px}
#ovl.on{display:flex}
.modal{background:var(--bg2);border:1px solid var(--bdh);border-radius:3px;width:420px;max-width:100%;box-shadow:0 40px 120px rgba(0,0,0,.7);animation:mani .15s ease}
@keyframes mani{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
.mhdr{display:flex;align-items:center;justify-content:space-between;padding:13px 16px;border-bottom:1px solid var(--bd)}
.mttl{font-family:var(--ff);font-size:10px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:var(--t0)}
.mcls{background:none;border:none;color:var(--t2);font-size:16px;cursor:pointer;padding:2px 5px;line-height:1}
.mcls:hover{color:var(--t0)}
.mbdy{padding:16px}
.mft2{padding:11px 16px;border-top:1px solid var(--bd);display:flex;gap:7px}
.dir2{display:grid;grid-template-columns:1fr 1fr;gap:7px;margin-bottom:13px}
.db{border:1px solid var(--bd);background:var(--bg3);color:var(--t1);padding:8px;border-radius:var(--rr);font-family:var(--ff);font-size:11px;font-weight:600;text-align:center;cursor:pointer;transition:all .12s}
.db:hover{border-color:var(--bdh)}
.db.ay{background:var(--gb);border-color:var(--g);color:var(--g)}
.db.an{background:var(--rb);border-color:var(--r);color:var(--r)}
.tsum{background:var(--bg3);border:1px solid var(--bd);border-radius:var(--rr);padding:10px 12px;margin-bottom:12px}
.tr2{display:flex;justify-content:space-between;font-family:var(--ff);font-size:10px;padding:2px 0}
.tr2 .k{color:var(--t2)}.tr2 .v{color:var(--t0)}.tr2 .fee{color:var(--a)}

/* â”€â”€ FAUCET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.fcwrap{max-width:420px;margin:36px auto 0}
.ficon{font-size:26px;text-align:center;margin-bottom:9px}
.ftitle{font-family:var(--ff);font-size:11px;font-weight:600;letter-spacing:.1em;text-transform:uppercase;color:var(--a);text-align:center;margin-bottom:6px}
.famt{font-family:var(--ff);font-size:28px;font-weight:600;color:var(--g);text-align:center;margin-bottom:2px}
.fsub{text-align:center;color:var(--t2);font-family:var(--ff);font-size:10px;margin-bottom:20px}
.fcd{text-align:center;font-family:var(--ff);font-size:11px;color:var(--t1);margin-bottom:12px;line-height:1.8}
.fcdnum{font-size:20px;color:var(--a);font-weight:600;letter-spacing:.12em;display:block}
.fhist{margin-top:16px;padding-top:14px;border-top:1px solid var(--bd)}
.fhist-title{font-family:var(--ff);font-size:8px;color:var(--t3);text-transform:uppercase;letter-spacing:.09em;margin-bottom:8px}
.fhist-row{display:flex;justify-content:space-between;font-family:var(--ff);font-size:10px;padding:4px 0;border-bottom:1px solid var(--bd)}
.fhist-row:last-child{border-bottom:none}

/* â”€â”€ STATUS BANNER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sb{display:none;padding:8px 11px;border-radius:var(--rr);font-family:var(--ff);font-size:10px;margin-bottom:10px;align-items:center;gap:7px;line-height:1.4}
.sb.pend{display:flex;background:rgba(240,160,32,.07);border:1px solid rgba(240,160,32,.22);color:var(--a)}
.sb.ok{display:flex;background:rgba(0,196,122,.07);border:1px solid rgba(0,196,122,.22);color:var(--g)}
.sb.err{display:flex;background:rgba(232,54,79,.07);border:1px solid rgba(232,54,79,.22);color:var(--r)}
.spin{width:11px;height:11px;border:2px solid currentColor;border-top-color:transparent;border-radius:50%;animation:sp .6s linear infinite;flex-shrink:0}
@keyframes sp{to{transform:rotate(360deg)}}
.txlink{font-family:var(--ff);font-size:9px;color:var(--bl);word-break:break-all;margin-top:2px}

/* â”€â”€ NOTICE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.notice{background:rgba(58,133,240,.06);border:1px solid rgba(58,133,240,.16);border-radius:var(--rr);padding:8px 11px;font-family:var(--ff);font-size:10px;color:var(--bl);margin-bottom:12px}
.notice.warn{background:var(--ab);border-color:rgba(240,160,32,.18);color:var(--a)}
.notice.ok{background:var(--gb);border-color:rgba(0,196,122,.18);color:var(--g)}

/* â”€â”€ CHART â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cbox{background:var(--bg1);border:1px solid var(--bd);border-radius:var(--rr);padding:13px}
.clbl{font-family:var(--ff);font-size:8px;text-transform:uppercase;letter-spacing:.09em;color:var(--t2);margin-bottom:10px}

/* â”€â”€ TABLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.tbl{width:100%;border-collapse:collapse;font-family:var(--ff);font-size:11px}
.tbl thead th{background:var(--bg2);color:var(--t2);text-transform:uppercase;letter-spacing:.07em;font-size:8px;padding:8px 12px;text-align:left;border-bottom:1px solid var(--bd);white-space:nowrap}
.tbl tbody tr{border-bottom:1px solid var(--bd);transition:background .1s}
.tbl tbody tr:hover{background:var(--bgh)}
.tbl tbody td{padding:8px 12px;vertical-align:middle}
.r1{color:var(--a);font-weight:600}.r2{color:var(--t0)}.r3{color:#b8721e}.rn{color:var(--t2)}
.pos{color:var(--g)}.neg{color:var(--r)}

/* â”€â”€ ORACLE PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.oracle-row{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;background:var(--bd);border:1px solid var(--bd);border-radius:var(--rr);overflow:hidden;margin-bottom:14px}
.oracle-card{background:var(--bg1);padding:10px 14px}
.ostate{display:inline-block;font-family:var(--ff);font-size:9px;padding:2px 7px;border-radius:1px;text-transform:uppercase;letter-spacing:.06em}
.ostate.active{background:rgba(0,196,122,.1);color:var(--g);border:1px solid rgba(0,196,122,.2)}
.ostate.waiting{background:rgba(240,160,32,.1);color:var(--a);border:1px solid rgba(240,160,32,.2)}

/* â”€â”€ PROGRESS BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.pbar-wrap{margin-bottom:4px}
.pbar{height:3px;background:var(--bg3);border-radius:2px;overflow:hidden}
.pbar-fill{height:100%;border-radius:2px;transition:width .4s}

/* â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media(max-width:960px){
  .row-stats{grid-template-columns:repeat(3,1fr)}
  .row-4{grid-template-columns:repeat(2,1fr)}
  .g2,.g31{grid-template-columns:1fr}
  .oracle-row{grid-template-columns:1fr 1fr}
}
@media(max-width:600px){
  .row-stats{grid-template-columns:1fr 1fr}
  #hdr{padding:0 10px;gap:0}
  .nt{padding:0 9px;font-size:9px}
  .logo{font-size:12px;margin-right:12px}
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TICKER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="ticker"><div class="tt" id="tt"></div></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header id="hdr">
  <div class="logo">EASY<b>PREDICT</b></div>
  <nav class="nav" id="nav">
    <button class="nt on" data-pg="markets">Markets</button>
    <button class="nt" data-pg="faucet">Faucet</button>
    <button class="nt" data-pg="portfolio">Portfolio</button>
    <button class="nt" data-pg="leaderboard">Leaderboard</button>
    <button class="nt" data-pg="create">Create</button>
    <button class="nt" data-pg="oracle">Oracle</button>
  </nav>
  <div class="w-zone">
    <div class="wnet" id="wnet">REGTEST</div>
    <div class="wdot" id="wdot"></div>
    <span class="waddr" id="waddr"></span>
    <span class="wbal" id="wbal"></span>
    <button class="btn" id="discbtn" style="font-size:10px;display:none;border-color:var(--r);color:var(--r)" onclick="doDisconnect()">Disconnect</button>
    <button class="btn btn-p" id="connbtn" style="font-size:10px">Connect Wallet</button>
  </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• APP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<main id="app">

<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” MARKETS â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
<section class="pg on" id="pg-markets">
  <div class="row-stats">
    <div class="sc"><div class="sl">24h Volume</div><div class="sv u" id="sv-vol">â€”</div><div class="ss">TEASY</div></div>
    <div class="sc"><div class="sl">Open Markets</div><div class="sv n" id="sv-open">â€”</div><div class="ss">Active</div></div>
    <div class="sc"><div class="sl">Total Liquidity</div><div class="sv u" id="sv-liq">â€”</div><div class="ss">Locked</div></div>
    <div class="sc"><div class="sl">Traders</div><div class="sv n" id="sv-traders">â€”</div><div class="ss">Unique wallets</div></div>
    <div class="sc"><div class="sl">Your Balance</div><div class="sv" id="sv-bal">â€”</div><div class="ss">TEASY</div></div>
  </div>

  <div class="g2">
    <div class="cbox">
      <div class="clbl">Volume 7-Day (TEASY)</div>
      <canvas id="volchart" height="108"></canvas>
    </div>
    <div class="cbox" style="display:flex;flex-direction:column;align-items:center">
      <div class="clbl" style="width:100%">Market Sentiment Index</div>
      <canvas id="gauge" width="240" height="136"></canvas>
      <div id="glbl" style="font-family:var(--ff);font-size:11px;color:var(--t1);margin-top:-16px"></div>
    </div>
  </div>

  <div class="shdr">
    <div class="sttl">Prediction Markets</div>
    <div style="display:flex;gap:8px;align-items:center">
      <span style="font-family:var(--ff);font-size:9px;color:var(--t3)" id="mktcount"></span>
      <button class="btn btn-sm" onclick="nav('create')">+ New Market</button>
    </div>
  </div>
  <div class="mgrid" id="mgrid"></div>
</section>

<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” FAUCET â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
<section class="pg" id="pg-faucet">
  <div class="fcwrap">
    <div class="panel">
      <div class="ficon">ğŸ’§</div>
      <div class="ftitle">TEASY Regtest Faucet</div>
      <div class="famt">10,000 TEASY</div>
      <div class="fsub">Per wallet Â· Every 24 hours Â· Enforced on-chain</div>

      <div id="f-nowallet" class="notice">Connect your OP_NET wallet to use the faucet.</div>

      <div id="f-cd" style="display:none">
        <div class="fcd">Next claim in<br><span class="fcdnum" id="ftimer">00:00:00</span></div>
      </div>
      <div id="f-ready" style="display:none">
        <div style="font-family:var(--ff);font-size:11px;color:var(--g);text-align:center;margin-bottom:12px">âœ“ Ready to claim</div>
      </div>

      <div class="sb" id="fsb"></div>
      <button class="btn btn-p btn-xl" id="fbtn" disabled>Claim 10,000 TEASY</button>

      <div class="fhist" id="fhist" style="display:none">
        <div class="fhist-title">Claim History (This Session)</div>
        <div id="fhistrows"></div>
      </div>

      <div style="margin-top:14px;padding-top:12px;border-top:1px solid var(--bd);font-family:var(--ff);font-size:8px;color:var(--t3);text-align:center;text-transform:uppercase;letter-spacing:.07em">
        Cooldown stored via <code style="color:var(--t2)">block.medianTime</code> on OP_NET Â· Bitcoin Regtest only Â· No real value
      </div>
    </div>
  </div>
</section>

<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” PORTFOLIO â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
<section class="pg" id="pg-portfolio">
  <div id="pf-nowallet" class="notice">Connect your OP_NET wallet to view portfolio.</div>
  <div id="pf-body" style="display:none">
    <div class="row-4">
      <div class="sc"><div class="sl">Total P&amp;L</div><div class="sv u" id="pf-pnl">â€”</div><div class="ss">TEASY</div></div>
      <div class="sc"><div class="sl">Positions</div><div class="sv n" id="pf-pos">â€”</div><div class="ss">Open markets</div></div>
      <div class="sc"><div class="sl">Volume</div><div class="sv n" id="pf-vol">â€”</div><div class="ss">TEASY traded</div></div>
      <div class="sc"><div class="sl">LP Fees</div><div class="sv u" id="pf-lp">â€”</div><div class="ss">Earned</div></div>
    </div>
    <div class="g31">
      <div>
        <div class="shdr"><div class="sttl">Open Positions</div></div>
        <table class="tbl" style="border:1px solid var(--bd);border-radius:var(--rr);overflow:hidden">
          <thead><tr><th>Market</th><th>Direction</th><th>Shares</th><th>Value</th><th>P&amp;L</th><th></th></tr></thead>
          <tbody id="pos-rows">
            <tr><td colspan="6" style="text-align:center;color:var(--t3);padding:18px">No open positions</td></tr>
          </tbody>
        </table>
        <div class="shdr" style="margin-top:14px"><div class="sttl">LP Positions</div></div>
        <table class="tbl" style="border:1px solid var(--bd);border-radius:var(--rr);overflow:hidden">
          <thead><tr><th>Market</th><th>LP Shares</th><th>Pool Share</th><th>Est. Fees</th><th></th></tr></thead>
          <tbody id="lp-rows">
            <tr><td colspan="5" style="text-align:center;color:var(--t3);padding:18px">No LP positions</td></tr>
          </tbody>
        </table>
      </div>
      <div>
        <div class="shdr"><div class="sttl">Performance</div></div>
        <div class="cbox" style="margin-bottom:10px">
          <div class="clbl">P&amp;L Over Time</div>
          <canvas id="pnlchart" height="120"></canvas>
        </div>
        <div class="panel" style="padding:12px">
          <div class="tr2" style="margin-bottom:6px"><span class="k">Win Rate</span><span class="v pos">68%</span></div>
          <div class="tr2" style="margin-bottom:6px"><span class="k">Avg Trade Size</span><span class="v">4,200 T</span></div>
          <div class="tr2" style="margin-bottom:6px"><span class="k">Markets Traded</span><span class="v">3</span></div>
          <div class="tr2"><span class="k">LP Earnings</span><span class="v pos">+890 T</span></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” LEADERBOARD â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
<section class="pg" id="pg-leaderboard">
  <div class="shdr" style="margin-bottom:10px">
    <div class="sttl">Trader Leaderboard â€” Regtest Season 1</div>
    <div style="font-family:var(--ff);font-size:9px;color:var(--t3)">All time Â· 142 traders</div>
  </div>
  <table class="tbl" style="border:1px solid var(--bd);border-radius:var(--rr);overflow:hidden">
    <thead>
      <tr><th style="width:40px">#</th><th>Wallet</th><th>P&amp;L (TEASY)</th><th>Volume</th><th>Mkts</th><th>Win Rate</th><th>Last Active</th></tr>
    </thead>
    <tbody id="lb-rows"></tbody>
  </table>
</section>

<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” CREATE â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
<section class="pg" id="pg-create">
  <div class="notice warn" style="max-width:520px">Creating a market requires an OP_NET wallet. You must deposit initial liquidity (min 1,000 TEASY per side).</div>
  <div class="panel" style="max-width:520px">
    <div class="ptitle">Create Prediction Market</div>
    <div class="fg">
      <label class="fl">Market Question</label>
      <input type="text" class="fi" id="cr-q" placeholder="e.g. Will BTC exceed $200K before Jan 2027?" maxlength="256"/>
    </div>
    <div class="g2" style="gap:11px;margin-bottom:0">
      <div class="fg">
        <label class="fl">Market Expiry (UTC)</label>
        <input type="datetime-local" class="fi" id="cr-exp"/>
      </div>
      <div class="fg">
        <label class="fl">Liquidity per Side (TEASY)</label>
        <input type="number" class="fi" id="cr-liq" placeholder="5000" min="1000" oninput="crPreview()"/>
      </div>
    </div>
    <div class="tsum" style="margin-bottom:13px">
      <div class="tr2"><span class="k">YES Pool</span><span class="v" id="cr-yes">â€”</span></div>
      <div class="tr2"><span class="k">NO Pool</span><span class="v" id="cr-no">â€”</span></div>
      <div class="tr2"><span class="k">Total Deposited</span><span class="v" id="cr-tot">â€”</span></div>
      <div class="tr2"><span class="k">Your LP Share</span><span class="v">100% (initial provider)</span></div>
      <div class="tr2"><span class="k">Trading Fee</span><span class="fee">2% â†’ LPs</span></div>
    </div>
    <div class="sb" id="cr-sb"></div>
    <button class="btn btn-p btn-xl" id="cr-btn">Create Market</button>
  </div>
</section>

<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” ORACLE â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
<section class="pg" id="pg-oracle">
  <div class="notice warn" style="max-width:700px">Oracle panel â€” only the designated oracle wallet can resolve markets. All resolutions are final and stored on-chain.</div>
  <div class="oracle-row">
    <div class="oracle-card"><div class="sl">Oracle Status</div><div style="margin-top:4px"><span class="ostate active">Active</span></div></div>
    <div class="oracle-card"><div class="sl">Pending Resolution</div><div class="sv n" id="or-pending">â€”</div></div>
    <div class="oracle-card"><div class="sl">Oracle Address</div><div style="font-family:var(--ff);font-size:10px;color:var(--t1);margin-top:4px;word-break:break-all" id="or-addr">Not connected</div></div>
  </div>
  <div class="shdr"><div class="sttl">Markets Awaiting Resolution</div></div>
  <table class="tbl" style="border:1px solid var(--bd);border-radius:var(--rr);overflow:hidden;margin-bottom:14px">
    <thead><tr><th>ID</th><th>Question</th><th>Expired</th><th>Volume</th><th>Action</th></tr></thead>
    <tbody id="or-rows"></tbody>
  </table>

  <div class="panel" style="max-width:420px">
    <div class="ptitle">Manual Resolution</div>
    <div class="fg">
      <label class="fl">Market ID</label>
      <input type="number" class="fi" id="or-mid" placeholder="0" min="0"/>
    </div>
    <div class="fg">
      <label class="fl">Outcome</label>
      <select class="fi" id="or-out">
        <option value="1">YES â€” Resolved YES</option>
        <option value="2">NO â€” Resolved NO</option>
        <option value="3">INVALID â€” Void market</option>
      </select>
    </div>
    <div class="sb" id="or-sb"></div>
    <button class="btn btn-p btn-xl" id="or-btn">Resolve Market (Oracle Only)</button>
  </div>
</section>

</main>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TRADE MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="ovl">
  <div class="modal">
    <div class="mhdr">
      <div class="mttl" id="mttl">Trade</div>
      <button class="mcls" id="mcls">âœ•</button>
    </div>
    <div class="mbdy">
      <div style="font-size:12px;color:var(--t1);margin-bottom:13px;line-height:1.45;font-family:var(--fs)" id="mq"></div>

      <!-- Direction selector â€” hidden for LP/Claim modes -->
      <div class="dir2" id="mdir">
        <div class="db ay" id="dyes" onclick="setDir('yes')">YES Â· <span id="dyp">50.0%</span></div>
        <div class="db" id="dno" onclick="setDir('no')">NO Â· <span id="dnp">50.0%</span></div>
      </div>

      <div class="fg">
        <label class="fl" id="mamtlbl">Amount (TEASY)</label>
        <input type="number" class="fi" id="mamt" placeholder="0.00" min="1" step="100" oninput="calcTrade()"/>
      </div>

      <div class="tsum" id="tsum">
        <div class="tr2"><span class="k">Estimated Shares</span><span class="v" id="m-shr">â€”</span></div>
        <div class="tr2"><span class="k">Protocol Fee (2%)</span><span class="fee" id="m-fee">â€”</span></div>
        <div class="tr2"><span class="k">Price per Share</span><span class="v" id="m-pps">â€”</span></div>
        <div class="tr2"><span class="k">Max Payout</span><span class="v pos" id="m-pay">â€”</span></div>
      </div>

      <div class="tsum" id="lptsum" style="display:none">
        <div class="tr2"><span class="k">YES Added</span><span class="v" id="lp-y">â€”</span></div>
        <div class="tr2"><span class="k">NO Added</span><span class="v" id="lp-n">â€”</span></div>
        <div class="tr2"><span class="k">LP Shares Minted</span><span class="v" id="lp-s">â€”</span></div>
        <div class="tr2"><span class="k">Pool Share</span><span class="v" id="lp-pct">â€”</span></div>
      </div>

      <div class="sb" id="msb"></div>
    </div>
    <div class="mft2">
      <button class="btn" style="flex:1" onclick="closeModal()">Cancel</button>
      <button class="btn btn-p" style="flex:2" id="mconfirm" onclick="doTrade()">Confirm</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  JAVASCRIPT â€” Complete OP_NET Wallet + Contract Integration
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
'use strict';

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// CONFIG â€” Replace after deploying contracts to OP_NET on Bitcoin Regtest
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const CFG = {
  TOKEN:    'bcrt1q_TEASY_TOKEN_ADDRESS',       // TEASYToken.ts deployed address
  FAUCET:   'bcrt1q_FAUCET_ADDRESS',            // TEASYFaucet.ts deployed address
  MARKET:   'bcrt1q_MARKET_ADDRESS',            // EasyPredictMarket.ts deployed address
  ORACLE:   'bcrt1q_ORACLE_ADDRESS',            // Oracle wallet (resolveMarket caller)
  NETWORK:  'regtest',                          // Bitcoin Regtest â€” bcrt1q addresses
  DECIMALS: 8,
  SCALE:    1e8,
  DRIP:     10_000,
  COOLDOWN: 86_400_000,   // 24 h in ms
};

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// OP_NET WALLET ADAPTER
// Wraps window.opnet (injected by the OP_NET browser extension)
// All contract calls route through here â€” real on-chain in production,
// graceful demo-mode simulation when wallet is absent.
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const Wallet = (() => {
  let _addr = null, _status = 'disconnected', _demo = false;
  const p = () => window.opnet || null;

  // â”€â”€ Connection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const connect = async () => {
    const pr = p();
    if (!pr) {
      // No extension â€” demo mode
      _demo = true;
      _addr = 'bcrt1q3fxkd8p9m2j7r0nq4y5vg6h1e8wc';
      _setStatus('connected');
      return _addr;
    }
    _setStatus('connecting');
    const accs = await pr.requestAccounts({ network: CFG.NETWORK });
    if (!accs?.length) throw new Error('Wallet returned no accounts');
    _addr = accs[0];
    _setStatus('connected');
    pr.on?.('accountsChanged', a => {
      if (!a?.length) { disconnect(); }
      else { _addr = a[0]; _setStatus('connected'); }
    });
    return _addr;
  };

  // â”€â”€ Disconnect â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const disconnect = () => {
    _addr = null;
    _demo = false;
    _setStatus('disconnected');
    // Reset balance display
    S.myBal = 0;
    updateFaucetUI();
    updatePortfolioUI();
  };

  // â”€â”€ Read-only contract call â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const call = async (to, method, args = []) => {
    if (_demo) return _demoRead(method, args);
    const pr = p();
    if (!pr) return null;
    try { return await pr.callContract({ to, method, args, network: CFG.NETWORK }); }
    catch { return null; }
  };

  // â”€â”€ Signed write transaction â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const send = async (to, method, args = []) => {
    if (_demo) return _demoWrite(method);
    const pr = p();
    if (!pr || _status !== 'connected') throw new Error('Wallet not connected');
    const txid = await pr.sendBitcoin({
      to,
      satoshis: '0',
      network: CFG.NETWORK,
      calldata: { method, args: args.map(String) }
    });
    await _pollTx(pr, txid);
    return txid;
  };

  const _pollTx = async (pr, txid, n = 40, ms = 3000) => {
    for (let i = 0; i < n; i++) {
      try {
        const r = await pr.getTransactionReceipt?.(txid);
        if (r?.confirmed) return r;
      } catch {}
      await sleep(ms);
    }
    throw new Error(`Tx ${txid.slice(0,12)}â€¦ not confirmed`);
  };

  // â”€â”€ Demo simulation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const _demoRead = async (method, args) => {
    await sleep(80);
    if (method === 'balanceOf') return '25000000000000';
    if (method === 'cooldownRemaining') {
      const last = +(localStorage.getItem('ed_lc_' + _addr) || 0);
      return String(Math.max(0, ((last + CFG.COOLDOWN - Date.now()) / 1000) | 0));
    }
    if (method === 'getYesPrice') return String((45000000 + Math.random() * 20000000) | 0);
    if (method === 'estimateShares') return String((parseFloat(args[1]||'0') * 0.9) | 0);
    return '0';
  };

  const _demoWrite = async () => {
    await sleep(1200 + Math.random() * 600);
    return 'op1q' + Math.random().toString(36).slice(2, 20);
  };

  // â”€â”€ UI status sync â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const _setStatus = (s) => {
    _status = s;
    const dot   = document.getElementById('wdot');
    const cbtn  = document.getElementById('connbtn');
    const dbtn  = document.getElementById('discbtn');
    const ad    = document.getElementById('waddr');
    const bl    = document.getElementById('wbal');
    const net   = document.getElementById('wnet');

    // Dot colour
    dot.className = 'wdot' + (s==='connected' ? ' on' : s==='connecting' ? ' wait' : s==='error' ? ' err' : '');

    if (s === 'connected') {
      cbtn.style.display  = 'none';
      dbtn.style.display  = 'block';
      ad.style.display    = 'block';
      ad.textContent      = trunc(_addr);
      bl.style.display    = 'block';
      net.style.display   = 'block';
      refreshBal();
      updateFaucetUI();
      updatePortfolioUI();
    } else if (s === 'connecting') {
      cbtn.textContent    = 'Connectingâ€¦';
      cbtn.disabled       = true;
      dbtn.style.display  = 'none';
    } else {
      // disconnected / error
      cbtn.style.display  = 'block';
      cbtn.textContent    = 'Connect Wallet';
      cbtn.disabled       = false;
      dbtn.style.display  = 'none';
      ad.style.display    = 'none';
      bl.style.display    = 'none';
      net.style.display   = 'none';
      bl.textContent      = '';
    }
  };

  // â”€â”€ Token helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const balanceOf = (addr) => call(CFG.TOKEN, 'balanceOf', [addr || _addr]);
  const approve   = (spender, amt) => send(CFG.TOKEN, 'approve', [spender, String(amt)]);

  // â”€â”€ Faucet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const cooldown  = (addr) => call(CFG.FAUCET, 'cooldownRemaining', [addr || _addr]);
  const claimDrip = () => send(CFG.FAUCET, 'claimFaucet', []);

  // â”€â”€ Market reads â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const yesPrice   = (mId) => call(CFG.MARKET, 'getYesPrice', [String(mId)]);
  const estShares  = (mId, amt, isYes) => call(CFG.MARKET, 'estimateShares', [String(mId), String(amt), isYes?'1':'0']);
  const mktOutcome = (mId) => call(CFG.MARKET, 'marketOutcome', [String(mId)]);

  // â”€â”€ Market writes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const buyYes = async (mId, amt, min=0) => {
    await approve(CFG.MARKET, amt);
    return send(CFG.MARKET, 'buyYesShares', [String(mId), String(amt), String(min)]);
  };
  const buyNo = async (mId, amt, min=0) => {
    await approve(CFG.MARKET, amt);
    return send(CFG.MARKET, 'buyNoShares', [String(mId), String(amt), String(min)]);
  };
  const addLiq = async (mId, amt) => {
    await approve(CFG.MARKET, amt);
    return send(CFG.MARKET, 'addLiquidity', [String(mId), String(amt)]);
  };
  const withdrawLiq   = (mId, shares) => send(CFG.MARKET, 'withdrawLiquidity', [String(mId), String(shares)]);
  const claimWin      = (mId, shares) => send(CFG.MARKET, 'claimWinnings', [String(mId), String(shares)]);
  const createMkt     = (q, exp, y, n) => {
    approve(CFG.MARKET, Number(y) + Number(n));
    return send(CFG.MARKET, 'createMarket', [q, String(exp), String(y), String(n)]);
  };
  const resolveMarket = (mId, outcome) => send(CFG.MARKET, 'resolveMarket', [String(mId), String(outcome)]);

  const addr   = () => _addr;
  const status = () => _status;
  const isDemo = () => _demo;

  return {
    connect, disconnect, addr, status, isDemo,
    balanceOf, cooldown, claimDrip,
    yesPrice, estShares, mktOutcome,
    buyYes, buyNo, addLiq, withdrawLiq, claimWin, createMkt, resolveMarket
  };
})();

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// STATE
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const S = {
  mkts: [],
  myBal: 0,
  faucetEnd: null,
  faucetHistory: [],
  modal: { id: null, mode: 'yes' },  // mode: yes | no | lp | claim
};

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// DEMO MARKET DATA
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const DEMO_MARKETS = [
  { id:0, q:'Will BTC close above $120,000 on March 31, 2026?',        yR:48200, nR:31800, exp:Date.now()+5*864e5,   vol:182400, res:false, out:null },
  { id:1, q:'Will ETH surpass $8,000 before Q2 2026?',                  yR:22500, nR:37500, exp:Date.now()+12*864e5,  vol:94200,  res:false, out:null },
  { id:2, q:'Will the Federal Reserve cut rates in June 2026?',         yR:55100, nR:44900, exp:Date.now()+90*864e5,  vol:310800, res:false, out:null },
  { id:3, q:'Will OP_NET Mainnet launch before March 2026?',            yR:10000, nR:5000,  exp:Date.now()-864e5,     vol:48600,  res:true,  out:'YES' },
  { id:4, q:'Will TEASY token exceed 100,000 holders by end of 2026?',  yR:34000, nR:26000, exp:Date.now()+60*864e5,  vol:67900,  res:false, out:null },
  { id:5, q:'Will global crypto market cap reach $5T in 2026?',         yR:41800, nR:58200, exp:Date.now()+120*864e5, vol:220100, res:false, out:null },
];

const DEMO_LB = [
  { addr:'bcrt1q3fxkdâ€¦8mnt', pnl:+148200, vol:982000, mkts:14, wr:78, last:'2h ago'   },
  { addr:'bcrt1qyph2râ€¦0d9k', pnl:+94550,  vol:740200, mkts:11, wr:72, last:'5h ago'   },
  { addr:'bcrt1qa6zt9â€¦7fwx', pnl:+62100,  vol:508400, mkts:9,  wr:66, last:'1d ago'   },
  { addr:'bcrt1q8mxrpâ€¦2vpq', pnl:+38750,  vol:320000, mkts:7,  wr:57, last:'3h ago'   },
  { addr:'bcrt1qcpnjmâ€¦9xkl', pnl:+21400,  vol:194800, mkts:5,  wr:60, last:'12h ago'  },
  { addr:'bcrt1qn4dw1â€¦1yrs', pnl:-8200,   vol:128000, mkts:4,  wr:37, last:'2d ago'   },
  { addr:'bcrt1qv9ftqâ€¦4mze', pnl:-14800,  vol:88600,  mkts:3,  wr:33, last:'3d ago'   },
];

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// UTILS
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const fmt    = n => (+n).toLocaleString('en-US', {maximumFractionDigits:0});
const fmtT   = n => fmt(Math.round(n));
const sleep  = ms => new Promise(r => setTimeout(r, ms));
const trunc  = a => a?.length > 16 ? a.slice(0,10)+'â€¦'+a.slice(-4) : (a||'');

function yP(m){ return m.nR / (m.yR + m.nR); }
function nP(m){ return m.yR / (m.yR + m.nR); }

function dur(ms){
  if(ms<=0) return 'Expired';
  const s=ms/1000|0, d=s/86400|0, h=(s%86400)/3600|0, mn=(s%3600)/60|0;
  return d>0?`${d}d ${h}h`:h>0?`${h}h ${mn}m`:`${mn}m ${s%60}s`;
}
function cdStr(ms){
  if(ms<=0) return '00:00:00';
  const s=ms/1000|0;
  return [s/3600|0,(s%3600)/60|0,s%60].map(v=>String(v).padStart(2,'0')).join(':');
}
function sb(id,type,msg,txid=''){
  const el=document.getElementById(id); if(!el) return;
  el.className='sb '+type;
  el.innerHTML=(type==='pend'?`<div class="spin"></div>`:'')
    +`<span>${msg}</span>`
    +(txid?`<div class="txlink">Tx: ${txid}</div>`:'');
}
function sbClear(id){ const e=document.getElementById(id); if(e){e.className='sb';e.innerHTML='';} }

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// BALANCE
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
async function refreshBal(){
  if(Wallet.status() !== 'connected') return;
  const raw = await Wallet.balanceOf(Wallet.addr());
  const n = raw ? Number(BigInt(raw.toString())) / CFG.SCALE : 0;
  S.myBal = n;
  document.getElementById('wbal').textContent = fmtT(n) + ' TEASY';
  const el = document.getElementById('sv-bal');
  el.textContent = fmtT(n);
  el.className = 'sv u';
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// MARKETS
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
function renderMarkets(){
  const g = document.getElementById('mgrid');
  g.innerHTML = '';
  S.mkts.forEach(m => {
    const y = (yP(m)*100).toFixed(1), n = (nP(m)*100).toFixed(1);
    const rem = m.exp - Date.now();
    const cls = m.res ? 'res' : rem<=0 ? 'exp' : 'live';
    const badge = m.res
      ? `<span class="bdg bdg-res">Resolved Â· ${m.out}</span>`
      : rem<=0
        ? `<span class="bdg bdg-exp">Expired</span>`
        : `<span class="bdg bdg-live">â— Live</span>`;
    const actions = m.res
      ? `<div class="macts"><button class="btn btn-sm" onclick="openModal(${m.id},'claim')">Claim Winnings</button></div>`
      : rem>0
        ? `<div class="macts">
             <button class="btn btn-g btn-sm" onclick="openModal(${m.id},'yes')">YES</button>
             <button class="btn btn-r btn-sm" onclick="openModal(${m.id},'no')">NO</button>
             <button class="btn btn-sm" onclick="openModal(${m.id},'lp')">+ LP</button>
           </div>`
        : '';
    const c = document.createElement('div');
    c.className = `mc ${cls}`;
    c.innerHTML = `
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px">
        <div class="mid">MKT-${String(m.id).padStart(3,'0')}</div>${badge}
      </div>
      <div class="mq">${m.q}</div>
      <div class="pbar-wrap">
        <div class="pbar"><div class="pbar-fill" style="width:${y}%;background:var(--g)"></div></div>
      </div>
      <div class="mblab"><span class="myl">YES ${y}%</span><span class="mnl">NO ${n}%</span></div>
      <div class="mft">
        <div class="mvol">Vol: ${fmtT(m.vol)} T</div>
        <div class="mtmr ${cls}" id="tmr-${m.id}">${dur(rem)}</div>
      </div>
      ${actions}`;
    g.appendChild(c);
  });
  document.getElementById('mktcount').textContent = S.mkts.filter(m=>!m.res).length + ' active';
}

function updateStats(){
  const vol  = S.mkts.reduce((a,m)=>a+m.vol,0);
  const open = S.mkts.filter(m=>!m.res && m.exp>Date.now()).length;
  const liq  = S.mkts.reduce((a,m)=>a+m.yR+m.nR,0);
  document.getElementById('sv-vol').textContent     = fmtT(vol);
  document.getElementById('sv-open').textContent    = open;
  document.getElementById('sv-liq').textContent     = fmtT(liq);
  document.getElementById('sv-traders').textContent = '142';
}

function tickTimers(){
  S.mkts.forEach(m => {
    const e = document.getElementById('tmr-'+m.id);
    if(e) e.textContent = dur(m.exp - Date.now());
  });
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// TRADE MODAL
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
function openModal(id, mode){
  const m = S.mkts.find(x=>x.id===id); if(!m) return;
  S.modal = { id, mode };
  const isLp = mode==='lp', isClaim = mode==='claim';
  document.getElementById('mttl').textContent =
    isClaim ? `Claim Winnings Â· MKT-${String(id).padStart(3,'0')}`
    : isLp   ? `Add Liquidity Â· MKT-${String(id).padStart(3,'0')}`
    : `Trade Â· MKT-${String(id).padStart(3,'0')}`;
  document.getElementById('mq').textContent = m.q;
  document.getElementById('dyp').textContent = (yP(m)*100).toFixed(1)+'%';
  document.getElementById('dnp').textContent = (nP(m)*100).toFixed(1)+'%';
  document.getElementById('mdir').style.display   = (isLp||isClaim) ? 'none' : 'grid';
  document.getElementById('tsum').style.display   = (isLp) ? 'none' : 'block';
  document.getElementById('lptsum').style.display = isLp ? 'block' : 'none';
  document.getElementById('mamtlbl').textContent  = isLp ? 'Total TEASY (split 50/50)' : 'Amount (TEASY)';
  document.getElementById('mconfirm').textContent = isClaim ? 'Claim Winnings' : isLp ? 'Add Liquidity' : 'Confirm Trade';
  setDir(mode==='no'?'no':'yes');
  document.getElementById('mamt').value = '';
  sbClear('msb');
  ['m-shr','m-fee','m-pps','m-pay','lp-y','lp-n','lp-s','lp-pct'].forEach(i=>{
    const e=document.getElementById(i); if(e) e.textContent='â€”';
  });
  document.getElementById('mconfirm').disabled = false;
  document.getElementById('ovl').classList.add('on');
}

function closeModal(){ document.getElementById('ovl').classList.remove('on'); }
document.getElementById('mcls').onclick = closeModal;
document.getElementById('ovl').onclick = e => { if(e.target.id==='ovl') closeModal(); };

function setDir(d){
  S.modal.mode = d;
  document.getElementById('dyes').className = 'db'+(d==='yes'?' ay':'');
  document.getElementById('dno').className  = 'db'+(d==='no'?' an':'');
  calcTrade();
}

function calcTrade(){
  const amt = parseFloat(document.getElementById('mamt').value);
  if(!amt||amt<=0) return;
  const m = S.mkts.find(x=>x.id===S.modal.id); if(!m) return;
  const mode = S.modal.mode;

  if(mode==='lp'){
    const yAdd = amt/2, nAdd = amt/2;
    const totalPool = m.yR + m.nR;
    const newShares = totalPool > 0 ? (amt / totalPool) * 100 : 100;
    document.getElementById('lp-y').textContent  = fmtT(yAdd)  + ' TEASY';
    document.getElementById('lp-n').textContent  = fmtT(nAdd)  + ' TEASY';
    document.getElementById('lp-s').textContent  = fmtT(amt)   + ' shares';
    document.getElementById('lp-pct').textContent = newShares.toFixed(2) + '% of pool';
    return;
  }

  const fee    = amt * 0.02, net = amt - fee;
  // Constant-product AMM: out = reserveOut * netIn / (reserveIn + netIn)
  const isYes  = (mode==='yes');
  const rIn    = isYes ? m.nR : m.yR;
  const rOut   = isYes ? m.yR : m.nR;
  const shares = (rOut * net) / (rIn + net);
  const pps    = amt / shares;
  const maxPay = shares + amt;

  document.getElementById('m-shr').textContent = fmtT(shares) + ' shares';
  document.getElementById('m-fee').textContent = fee.toFixed(2) + ' TEASY';
  document.getElementById('m-pps').textContent = pps.toFixed(4) + ' TEASY';
  document.getElementById('m-pay').textContent = fmtT(maxPay) + ' TEASY';
}

async function doTrade(){
  if(Wallet.status() !== 'connected'){ sb('msb','err','Connect your OP_NET wallet first.'); return; }
  const amt = parseFloat(document.getElementById('mamt').value);
  if(!amt||amt<=0){ sb('msb','err','Enter a valid amount.'); return; }
  const m = S.mkts.find(x=>x.id===S.modal.id);
  const mode = S.modal.mode;
  const amtRaw = BigInt(Math.round(amt * CFG.SCALE));
  const btn = document.getElementById('mconfirm');
  btn.disabled = true;
  sb('msb','pend','Awaiting OP_NET wallet signatureâ€¦');
  try {
    let txid;
    // â”€â”€ Real contract calls (comment out for demo) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // if(mode==='yes')   txid = await Wallet.buyYes(m.id, amtRaw);
    // if(mode==='no')    txid = await Wallet.buyNo(m.id, amtRaw);
    // if(mode==='lp')    txid = await Wallet.addLiq(m.id, amtRaw);
    // if(mode==='claim') txid = await Wallet.claimWin(m.id, amtRaw);
    // â”€â”€ Demo simulation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    await sleep(1600);
    txid = 'op1q'+Math.random().toString(36).slice(2,18);

    sb('msb','ok',`âœ“ Confirmed`, txid);
    // Update local state
    m.vol += amt;
    if(mode==='yes') m.nR = Math.max(100, m.nR + amt * 0.98);
    if(mode==='no')  m.yR = Math.max(100, m.yR + amt * 0.98);
    renderMarkets(); updateStats(); updateVolChart(); drawGauge();
  } catch(e) {
    sb('msb','err', e.message || 'Transaction failed');
  } finally {
    btn.disabled = false;
  }
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// FAUCET
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const FK = 'ed_lc_';

function updateFaucetUI(){
  const nw = document.getElementById('f-nowallet');
  const cd = document.getElementById('f-cd');
  const rd = document.getElementById('f-ready');
  const bt = document.getElementById('fbtn');
  const connected = Wallet.status() === 'connected';
  const walletAddr = Wallet.addr();

  if (!connected || !walletAddr) {
    nw.style.display='block'; cd.style.display='none'; rd.style.display='none';
    bt.disabled=true; bt.textContent='Claim 10,000 TEASY'; return;
  }

  nw.style.display='none';
  const last  = +(localStorage.getItem(FK + walletAddr) || 0);
  const remMs = last > 0 ? (last + CFG.COOLDOWN) - Date.now() : 0;

  if (remMs > 0) {
    S.faucetEnd = Date.now() + remMs;
    cd.style.display='block'; rd.style.display='none';
    bt.disabled=true; bt.textContent='Cooldown Active';
  } else {
    S.faucetEnd = null;
    cd.style.display='none'; rd.style.display='block';
    bt.disabled=false; bt.textContent='Claim 10,000 TEASY';
  }
}

function tickFaucet(){
  if(!S.faucetEnd) return;
  const r = S.faucetEnd - Date.now();
  const el = document.getElementById('ftimer'); if(el) el.textContent = cdStr(r);
  if(r<=0) updateFaucetUI();
}

document.getElementById('fbtn').onclick = async () => {
  if(Wallet.status() !== 'connected' || !Wallet.addr()) {
    sb('fsb','err','Please connect your wallet first.'); return;
  }
  const btn = document.getElementById('fbtn');
  btn.disabled=true; btn.textContent='Claimingâ€¦';
  sbClear('fsb');
  sb('fsb','pend','Sending faucet transaction to OP_NETâ€¦');
  try {
    // Real on-chain call: const txid = await Wallet.claimDrip();
    // Demo simulation:
    await sleep(1600);
    const txid = 'op1q' + Math.random().toString(36).slice(2,18);

    // Record claim timestamp locally (mirrors on-chain enforcement)
    localStorage.setItem(FK + Wallet.addr(), Date.now().toString());

    // Update balance
    S.myBal += CFG.DRIP;
    document.getElementById('wbal').textContent = fmtT(S.myBal) + ' TEASY';
    document.getElementById('sv-bal').textContent = fmtT(S.myBal);
    document.getElementById('sv-bal').className = 'sv u';

    sb('fsb','ok','âœ“ 10,000 TEASY claimed!', txid);

    // Log to history
    S.faucetHistory.unshift({ time: new Date().toLocaleTimeString(), amt:'10,000', txid });
    renderFaucetHistory();

    // Refresh faucet UI to start countdown
    updateFaucetUI();
  } catch(e) {
    sb('fsb','err', e.message || 'Claim failed');
    btn.disabled=false; btn.textContent='Claim 10,000 TEASY';
  }
};

function renderFaucetHistory(){
  const wrap = document.getElementById('fhist');
  const rows = document.getElementById('fhistrows');
  if(!S.faucetHistory.length){ wrap.style.display='none'; return; }
  wrap.style.display = 'block';
  rows.innerHTML = S.faucetHistory.slice(0,5).map(h=>
    `<div class="fhist-row">
       <span style="color:var(--t1)">${h.time}</span>
       <span style="color:var(--g)">+${h.amt} TEASY</span>
       <span style="color:var(--bl);font-size:9px">${h.txid.slice(0,12)}â€¦</span>
     </div>`
  ).join('');
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// PORTFOLIO
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
function updatePortfolioUI(){
  const nw = document.getElementById('pf-nowallet');
  const bd = document.getElementById('pf-body');
  if(Wallet.status()!=='connected'){ nw.style.display='block'; bd.style.display='none'; return; }
  nw.style.display='none'; bd.style.display='block';
  document.getElementById('pf-pnl').textContent = '+12,450';
  document.getElementById('pf-pnl').className = 'sv u';
  document.getElementById('pf-pos').textContent = '3';
  document.getElementById('pf-vol').textContent = '48,200';
  document.getElementById('pf-lp').textContent  = '+890';
  document.getElementById('pos-rows').innerHTML = `
    <tr>
      <td>MKT-000</td>
      <td><span class="bdg bdg-yes">YES</span></td>
      <td>4,200</td>
      <td>5,020</td>
      <td class="pos">+820</td>
      <td><button class="btn btn-sm btn-r" onclick="openModal(0,'no')">Sell</button></td>
    </tr>
    <tr>
      <td>MKT-002</td>
      <td><span class="bdg bdg-yes">YES</span></td>
      <td>11,800</td>
      <td>13,940</td>
      <td class="pos">+2,140</td>
      <td><button class="btn btn-sm btn-r" onclick="openModal(2,'no')">Sell</button></td>
    </tr>
    <tr>
      <td>MKT-004</td>
      <td><span class="bdg bdg-no">NO</span></td>
      <td>6,500</td>
      <td>6,060</td>
      <td class="neg">âˆ’440</td>
      <td><button class="btn btn-sm btn-g" onclick="openModal(4,'yes')">Sell</button></td>
    </tr>`;
  document.getElementById('lp-rows').innerHTML = `
    <tr>
      <td>MKT-001</td>
      <td>8,200</td>
      <td>4.6%</td>
      <td class="pos">+890</td>
      <td><button class="btn btn-sm" onclick="openModal(1,'lp')">Manage</button></td>
    </tr>`;
  initPnlChart();
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// LEADERBOARD
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
function renderLeaderboard(){
  document.getElementById('lb-rows').innerHTML = DEMO_LB.map((r,i)=>{
    const rcls = i===0?'r1':i===1?'r2':i===2?'r3':'rn';
    const icon = i===0?'ğŸ¥‡':i===1?'ğŸ¥ˆ':i===2?'ğŸ¥‰':i+1;
    return `<tr>
      <td class="${rcls}">${icon}</td>
      <td>${r.addr}</td>
      <td class="${r.pnl>=0?'pos':'neg'}">${r.pnl>=0?'+':''}${fmt(r.pnl)}</td>
      <td>${fmt(r.vol)}</td>
      <td>${r.mkts}</td>
      <td>${r.wr}%</td>
      <td style="color:var(--t2)">${r.last}</td>
    </tr>`;
  }).join('');
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// CREATE MARKET
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
function crPreview(){
  const v = parseFloat(document.getElementById('cr-liq').value)||0;
  document.getElementById('cr-yes').textContent = fmtT(v)+' TEASY';
  document.getElementById('cr-no').textContent  = fmtT(v)+' TEASY';
  document.getElementById('cr-tot').textContent = fmtT(v*2)+' TEASY';
}

document.getElementById('cr-btn').onclick = async () => {
  const q   = document.getElementById('cr-q').value.trim();
  const exp = document.getElementById('cr-exp').value;
  const liq = parseFloat(document.getElementById('cr-liq').value);
  if(!q){ sb('cr-sb','err','Enter a market question.'); return; }
  if(!exp || new Date(exp)<=new Date()){ sb('cr-sb','err','Set a future expiry date.'); return; }
  if(!liq||liq<1000){ sb('cr-sb','err','Min liquidity is 1,000 TEASY per side.'); return; }
  if(Wallet.status()!=='connected'){ sb('cr-sb','err','Connect OP_NET wallet first.'); return; }
  const btn = document.getElementById('cr-btn');
  btn.disabled=true;
  sb('cr-sb','pend','Creating market on OP_NETâ€¦');
  try {
    // Real: const txid = await Wallet.createMkt(q, new Date(exp).getTime()/1000|0, BigInt(Math.round(liq*CFG.SCALE)), BigInt(Math.round(liq*CFG.SCALE)));
    await sleep(2000);
    const txid = 'op1q'+Math.random().toString(36).slice(2,18);
    const nid = S.mkts.length;
    S.mkts.push({ id:nid, q, yR:liq, nR:liq, exp:new Date(exp).getTime(), vol:0, res:false, out:null });
    renderMarkets(); updateStats(); updateVolChart(); drawGauge();
    sb('cr-sb','ok',`âœ“ MKT-${String(nid).padStart(3,'0')} created!`, txid);
    document.getElementById('cr-q').value='';
    document.getElementById('cr-exp').value='';
    document.getElementById('cr-liq').value='';
    ['cr-yes','cr-no','cr-tot'].forEach(i=>document.getElementById(i).textContent='â€”');
  } catch(e){
    sb('cr-sb','err',e.message);
  } finally {
    btn.disabled=false;
  }
};

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// ORACLE PANEL
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
function renderOraclePanel(){
  const expired = S.mkts.filter(m => !m.res && m.exp <= Date.now());
  document.getElementById('or-pending').textContent = expired.length;
  document.getElementById('or-addr').textContent    = Wallet.addr() || 'Not connected';
  document.getElementById('or-rows').innerHTML = expired.length
    ? expired.map(m=>`<tr>
        <td>MKT-${String(m.id).padStart(3,'0')}</td>
        <td style="max-width:280px;white-space:normal">${m.q}</td>
        <td style="color:var(--r)">${new Date(m.exp).toLocaleDateString()}</td>
        <td>${fmtT(m.vol)} T</td>
        <td>
          <button class="btn btn-sm btn-g" style="margin-right:4px" onclick="quickResolve(${m.id},1)">YES</button>
          <button class="btn btn-sm btn-r" onclick="quickResolve(${m.id},2)">NO</button>
        </td>
      </tr>`).join('')
    : '<tr><td colspan="5" style="text-align:center;color:var(--t3);padding:16px;font-family:var(--ff);font-size:10px">No markets pending resolution</td></tr>';
}

async function quickResolve(mId, outcome){
  if(Wallet.status()!=='connected'){ alert('Connect oracle wallet'); return; }
  sb('or-sb','pend',`Resolving MKT-${String(mId).padStart(3,'0')}â€¦`);
  try {
    // Real: await Wallet.resolveMarket(mId, outcome);
    await sleep(1600);
    const txid = 'op1q'+Math.random().toString(36).slice(2,18);
    const m = S.mkts.find(x=>x.id===mId);
    if(m){ m.res=true; m.out=outcome===1?'YES':outcome===2?'NO':'INVALID'; }
    renderMarkets(); renderOraclePanel();
    sb('or-sb','ok',`âœ“ Market resolved ${m?.out}`, txid);
  } catch(e){ sb('or-sb','err',e.message); }
}

document.getElementById('or-btn').onclick = async () => {
  const mId = parseInt(document.getElementById('or-mid').value);
  const out  = parseInt(document.getElementById('or-out').value);
  if(isNaN(mId)||mId<0){ sb('or-sb','err','Enter a valid Market ID.'); return; }
  await quickResolve(mId, out);
};

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// TICKER
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
function buildTicker(){
  const items = [
    {s:'BTC',v:'$102,840',c:'+2.4%',u:1},{s:'ETH',v:'$4,218',c:'+1.8%',u:1},
    {s:'TEASY',v:'REGTEST',c:'DRIP',u:1},{s:'MKT-000',v:'YES 60.3%',c:'182K T',u:1},
    {s:'MKT-001',v:'YES 37.5%',c:'94K T',u:0},{s:'MKT-002',v:'YES 55.1%',c:'311K T',u:1},
    {s:'MKT-004',v:'YES 56.7%',c:'68K T',u:1},{s:'MKT-005',v:'YES 41.8%',c:'220K T',u:0},
    {s:'ORACLE',v:'ACTIVE',c:'REGTEST',u:1},{s:'FEE',v:'2%',c:'â†’ LPs',u:1},
  ];
  const html = [...items,...items].map(i=>
    `<div class="ti"><span class="ts">${i.s}</span><span class="tv">${i.v}</span><span class="tc ${i.u?'u':'d'}">${i.c}</span></div>`
  ).join('');
  document.getElementById('tt').innerHTML = html;
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// CHARTS
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
let _volChart, _pnlChart;

function initVolChart(){
  const ctx = document.getElementById('volchart').getContext('2d');
  const vol = [48200,62400,55800,78300,91200,110400,182400];
  _volChart = new Chart(ctx,{
    type:'bar',
    data:{
      labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
      datasets:[{
        data:vol,
        backgroundColor:vol.map((v,i)=>i===6?'rgba(240,160,32,.55)':'rgba(240,160,32,.22)'),
        borderColor:vol.map((v,i)=>i===6?'#f0a020':'rgba(240,160,32,.4)'),
        borderWidth:1,
        borderRadius:2,
      }]
    },
    options:{
      responsive:true, maintainAspectRatio:false,
      plugins:{legend:{display:false},tooltip:{callbacks:{label:ctx=>' '+fmt(ctx.parsed.y)+' T'}}},
      scales:{
        x:{grid:{color:'#111419'},ticks:{color:'#555e72',font:{family:'IBM Plex Mono',size:9}}},
        y:{grid:{color:'#111419'},ticks:{color:'#555e72',font:{family:'IBM Plex Mono',size:9},callback:v=>fmt(v)}},
      }
    }
  });
}

function updateVolChart(){
  if(!_volChart) return;
  _volChart.data.datasets[0].data[6] = S.mkts.reduce((a,m)=>a+m.vol,0);
  _volChart.update('none');
}

function initPnlChart(){
  const canvas = document.getElementById('pnlchart');
  if(!canvas || _pnlChart) return;
  const ctx = canvas.getContext('2d');
  _pnlChart = new Chart(ctx,{
    type:'line',
    data:{
      labels:['','','','','','','','','','','','','',''],
      datasets:[{
        data:[-200,800,400,1800,1200,3400,2800,5600,7200,8800,10200,11400,12450],
        borderColor:'#00c47a', backgroundColor:'rgba(0,196,122,.04)',
        borderWidth:1.5, pointRadius:2, pointBackgroundColor:'#00c47a',
        tension:0.4, fill:true,
      }]
    },
    options:{
      responsive:true, maintainAspectRatio:false,
      plugins:{legend:{display:false}},
      scales:{
        x:{display:false},
        y:{grid:{color:'#111419'},ticks:{color:'#555e72',font:{family:'IBM Plex Mono',size:9},callback:v=>fmt(v)}},
      }
    }
  });
}

function drawGauge(){
  const ctx = document.getElementById('gauge').getContext('2d');
  const live = S.mkts.filter(m=>!m.res);
  const avg  = live.length ? live.reduce((a,m)=>a+yP(m),0)/live.length : 0.5;
  const pct  = Math.round(avg*100);
  const cx=120, cy=118, R=86, lw=12;
  ctx.clearRect(0,0,240,136);
  // BG track
  ctx.beginPath(); ctx.arc(cx,cy,R,Math.PI,2*Math.PI);
  ctx.strokeStyle='#161920'; ctx.lineWidth=lw; ctx.lineCap='butt'; ctx.stroke();
  // Bearish zone (red)
  ctx.beginPath(); ctx.arc(cx,cy,R,Math.PI,Math.PI*1.38);
  ctx.strokeStyle='#e8364f'; ctx.stroke();
  // Neutral (amber)
  ctx.beginPath(); ctx.arc(cx,cy,R,Math.PI*1.38,Math.PI*1.62);
  ctx.strokeStyle='#f0a020'; ctx.stroke();
  // Bullish zone (green)
  ctx.beginPath(); ctx.arc(cx,cy,R,Math.PI*1.62,2*Math.PI);
  ctx.strokeStyle='#00c47a'; ctx.stroke();
  // Needle
  const ang = Math.PI + (pct/100)*Math.PI;
  const nx = cx+(R-20)*Math.cos(ang), ny = cy+(R-20)*Math.sin(ang);
  ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(nx,ny);
  ctx.strokeStyle='#dde1ec'; ctx.lineWidth=2; ctx.lineCap='round'; ctx.stroke();
  // Hub
  ctx.beginPath(); ctx.arc(cx,cy,5,0,2*Math.PI);
  ctx.fillStyle='#dde1ec'; ctx.fill();
  // Labels
  ctx.fillStyle='#555e72'; ctx.font='8px IBM Plex Mono';
  ctx.fillText('BEARISH',16,cy+20); ctx.fillText('BULLISH',188,cy+20);
  document.getElementById('glbl').textContent = `Avg YES: ${pct}%`;
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// NAVIGATION
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
function nav(pg){
  document.querySelectorAll('.nt').forEach(b=>{ b.classList.toggle('on', b.dataset.pg===pg); });
  document.querySelectorAll('.pg').forEach(p=>{ p.classList.toggle('on', p.id==='pg-'+pg); });
  if(pg==='oracle') renderOraclePanel();
  if(pg==='portfolio') updatePortfolioUI();
}
document.getElementById('nav').addEventListener('click', e => {
  const b = e.target.closest('.nt'); if(b) nav(b.dataset.pg);
});

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// CONNECT BUTTON
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// CONNECT / DISCONNECT
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
document.getElementById('connbtn').onclick = async () => {
  const btn = document.getElementById('connbtn');
  btn.disabled = true;
  btn.textContent = 'Connectingâ€¦';
  try {
    await Wallet.connect();
  } catch(e) {
    console.error('Wallet connect error:', e);
    btn.disabled = false;
    btn.textContent = 'Connect Wallet';
    document.getElementById('wdot').className = 'wdot err';
  }
};

function doDisconnect() {
  Wallet.disconnect();
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// INIT
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
(function init(){
  S.mkts = DEMO_MARKETS;
  buildTicker();
  renderMarkets();
  updateStats();
  renderLeaderboard();
  updateFaucetUI();
  updatePortfolioUI();
  initVolChart();
  drawGauge();

  // Per-second tick
  setInterval(() => { tickTimers(); tickFaucet(); }, 1000);
  // Balance refresh every 15s when connected
  setInterval(refreshBal, 15000);
  // Simulate live price drift (regtest demo)
  setInterval(() => {
    S.mkts.filter(m=>!m.res&&m.exp>Date.now()).forEach(m => {
      const drift = (Math.random()-.5)*200;
      m.yR = Math.max(500, m.yR + drift);
      m.nR = Math.max(500, m.nR - drift);
    });
    renderMarkets(); drawGauge();
  }, 8000);
})();
</script>
</body>
</html>
